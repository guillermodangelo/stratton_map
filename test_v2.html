<!DOCTYPE html>
<html>
<head>
	<html lang="en">

	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
	<link rel="stylesheet" href="leaflet.zoomhome.css"/>


	<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
	<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
	<script src="leaflet.zoomhome.min.js"></script>
	<script src="mdbw_v3.js"></script>

	<style>
	  #map {
	    position: absolute;
   			top: 0;
   			bottom: 0;
   			left: 0;
   			right: 0;
	 }

	</style>
</head>
	<body>
		<div id = 'map'>
			<script>
  			var map = L.map('map', {zoomControl: false}).
    		 setView([25.761681, -80.191788], 10);

    		 googleTerrain = L.tileLayer('http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}',{
    			maxZoom: 20,
    			subdomains:['mt0','mt1','mt2','mt3']
}).addTo(map)

// Resetting Zoom

var zoomHome = L.Control.zoomHome({
	position: 'bottomright',
	zoomHomeIcon: 'rotate-right'
	});
zoomHome.addTo(map);

// Geocoder - Used to restrict search results on Address search bar.

var geocoder = L.Control.Geocoder.google({
	apiKey:'AIzaSyCpmI_Pl3vVwuc4BIP3oVE5onexaFc6xoQ',
	geocodingQueryParams:{
		language: 'en',
		country: 'us',
		administrative_area_level_1: 'Florida',
		administrative_area_level_2: 'Miami-Dade, Broward'
    }
})

// Search bar

L.Control.geocoder({
	geocoder: geocoder,
	collapsed: false,
	placeholder: "Find your STR Regulation",
	errorMessage: "STR map is only available for Miami-Dade and Broward counties"
}).addTo(map);

// Styling boundaries
// Other option for styling: function style(feature) {return {color: feature.properties.COLOR, weight: 1, fillOpacity: 0.25};}

var Style =

function style(feature) {
    switch (feature.properties.STATUS) {
            case 'Permitted': return {color: "#0868ac", weight: 1};
            case 'Not permitted':   return {color: "#cb181d", weight: 1};
            case 'TBD':   return {color: "#fee391", weight: 1};
            case 'N.A':   return {color: "#252525", weight: 1};
        };
}

// Loading map

L.geoJson(mdbw_v3, {
	style: Style
}).bindPopup(function (layer) {
    return "<b> County: </b>"+layer.feature.properties.COUNTY + "</br>" + "<b> City: </b>"+layer.feature.properties.NAME + "</br>" + "<b> STR Regulation: </b>"+layer.feature.properties.STATUS;
}).addTo(map);

			</script>
		</div>
	</body>
</html>
